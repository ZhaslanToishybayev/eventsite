{% load static %}
<!DOCTYPE html>
<html lang="zxx" class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="{% static 'images/favicon-32x32.png' %}">
    <meta name="author" content="colorlib">
    <meta name="description" content="UnitySphere - fan-club.kz">
    <meta name="keywords" content="—Ñ–∞–Ω-–∫–ª—É–±—ã, —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è">
    <meta charset="UTF-8">
    {% csrf_token %}
    <meta name="csrf-token" content="{{ csrf_token }}">

    {% block head_title %}
    <title>{% block title %}UnitySphere - fan-club.kz{% endblock %}</title>
    {% endblock head_title %}

    <script src="https://kit.fontawesome.com/77b427ccd5.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    {% block styles %}
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'css/template_css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/linearicons.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/nice-select.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/owl.carousel.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/jquery-ui.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/our_css/style.css' %}">
    {% endblock %}

    {% block extra_head %}
    {% endblock %}
</head>
<body class="bg-white">
    {% block header %}
    <header id="header" id="home">
        <div class="container">
            <div class="row align-items-center justify-content-between d-flex">
                <div id="logo">
                    <a href="/"><img src="{% static 'images/fanclub_horizontal.png' %}" alt="" title="" style="max-width: 150px;" /></a>
                </div>
                <nav id="nav-menu-container">
                    <ul class="nav-menu">
                        <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="{% url 'clubs' %}">–°–æ–æ–±—â–µ—Å—Ç–≤–∞</a></li>
                        <li><a href="{% url 'festivals' %}">–§–µ—Å—Ç–∏–≤–∞–ª–∏</a></li>
                        <li><a href="{% url 'publications' %}">–ü—É–±–ª–∏–∫–∞—Ü–∏–∏</a></li>
                        <li><a href="/admin/">–ê–¥–º–∏–Ω</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    {% endblock %}

    {% block body %}
    {% endblock %}

    {% block content %}
    {% endblock %}

    {% block footer %}
    <footer class="footer-area section-gap">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>–û —Å–∞–π—Ç–µ</h6>
                        <p>
                            UnitySphere - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–Ω-–∫–ª—É–±–∞–º–∏, —Å–æ–æ–±—â–µ—Å—Ç–≤–∞–º–∏ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏.
                        </p>
                    </div>
                </div>
                <div class="col-lg-5 col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h6>
                        <p>
                            –≥. –ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω<br>
                            Email: info@fan-club.kz
                        </p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
                <p class="footer-text m-0">
                    Copyright ¬© 2025 All rights reserved
                </p>
            </div>
        </div>
    </footer>
    {% endblock %}

    {% block scripts %}
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="{% static 'css/template_css/bootstrap.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.ajaxchimp.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.nice-select.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.sticky.js' %}"></script>
    <script src="{% static 'css/template_css/nouislider.min.js' %}"></script>
    <script src="{% static 'css/template_css/owl.carousel.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.ajaxchimp.min.js' %}"></script>
    <script src="{% static 'css/template_css/mail-script.js' %}"></script>
    <script src="{% static 'css/template_css/main.js' %}"></script>
    {% endblock %}

    {% block extra_scripts %}
    {% endblock %}

    <!-- Simple Working AI Widget -->
    <button class="simple-widget-button" id="simpleWidgetButton" title="ü§ñ AI –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç">
        ü§ñ
    </button>

    <div class="simple-widget-chat" id="simpleWidgetChat">
        <div class="simple-widget-header">
            <h3>ü§ñ AI –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</h3>
            <button class="simple-widget-close" id="simpleWidgetClose">‚úï</button>
        </div>
        <div class="simple-widget-messages" id="simpleWidgetMessages">
            <div class="simple-widget-message simple-widget-bot-message">
                üëã –ü—Ä–∏–≤–µ—Ç! –Ø - AI –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç UnitySphere.<br>
                –ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å–æ–∑–¥–∞—Ç—å –≤–∞—à –∏–¥–µ–∞–ª—å–Ω—ã–π –∫–ª—É–±!
            </div>
        </div>
        <div class="simple-widget-input">
            <input type="text" id="simpleWidgetInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="500">
            <button id="simpleWidgetSend">üì§</button>
        </div>
    </div>

    <style>
        .simple-widget-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .simple-widget-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0,0,0,0.3);
        }

        .simple-widget-chat {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            z-index: 9998;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 2px solid #667eea;
        }

        .simple-widget-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .simple-widget-header h3 {
            margin: 0;
            font-size: 16px;
        }

        .simple-widget-close {
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 4px;
            color: white;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .simple-widget-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }

        .simple-widget-message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 18px;
            max-width: 80%;
        }

        .simple-widget-bot-message {
            background: #e3f2fd;
            margin-right: auto;
        }

        .simple-widget-user-message {
            background: #f0f0f0;
            margin-left: auto;
            text-align: right;
        }

        .simple-widget-input {
            display: flex;
            padding: 15px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .simple-widget-input input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 10px 15px;
            outline: none;
            font-size: 14px;
        }

        .simple-widget-input button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 15px;
            margin-left: 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .simple-widget-input button:hover {
            transform: scale(1.05);
        }

        .simple-widget-input button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
    </style>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –≤–∏–¥–∂–µ—Ç–∞
        let isOpen = false;
        let isProcessing = false;

        const button = document.getElementById('simpleWidgetButton');
        const chat = document.getElementById('simpleWidgetChat');
        const messages = document.getElementById('simpleWidgetMessages');
        const input = document.getElementById('simpleWidgetInput');
        const sendBtn = document.getElementById('simpleWidgetSend');
        const closeBtn = document.getElementById('simpleWidgetClose');

        // –û—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å —á–∞—Ç
        button.addEventListener('click', toggleChat);
        closeBtn.addEventListener('click', toggleChat);

        function toggleChat() {
            if (isOpen) {
                chat.style.display = 'none';
                isOpen = false;
            } else {
                chat.style.display = 'flex';
                isOpen = true;
                input.focus();
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        sendBtn.addEventListener('click', sendMessage);
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        input.addEventListener('input', function() {
            sendBtn.disabled = !input.value.trim() || isProcessing;
        });

        function sendMessage() {
            const message = input.value.trim();
            if (!message || isProcessing) return;

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            addMessage(message, 'user');
            input.value = '';
            setProcessingState(true);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø–µ—á–∞—Ç–∏
            setTimeout(() => {
                setProcessingState(false);
                const response = generateResponse(message);
                addMessage(response, 'bot');
            }, 1500 + Math.random() * 1000);
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `simple-widget-message simple-widget-${sender}-message`;
            messageDiv.innerHTML = text;
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
        }

        function generateResponse(message) {
            const msg = message.toLowerCase();
            if (msg.includes('–∫–ª—É–±') || msg.includes('—Å–æ–æ–±—â–µ—Å—Ç–≤–æ')) {
                return 'üè† –û—Ç–ª–∏—á–Ω–æ! –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–°–æ–æ–±—â–µ—Å—Ç–≤–∞" –∏ –Ω–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –∫–ª—É–±". –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –º–Ω–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, –∫–∞–∫–æ–π —Ç–∏–ø –∫–ª—É–±–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å?';
            }
            if (msg.includes('–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏') || msg.includes('—Ñ–µ—Å—Ç–∏–≤–∞–ª—å')) {
                return 'üéâ –í —Ä–∞–∑–¥–µ–ª–µ "–§–µ—Å—Ç–∏–≤–∞–ª–∏" –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤—Å–µ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è. –•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –ø–æ–º–æ–≥ –Ω–∞–π—Ç–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –ø–æ –≤–∞—à–∏–º –∏–Ω—Ç–µ—Ä–µ—Å–∞–º?';
            }
            if (msg.includes('–ø–æ–º–æ—â—å') || msg.includes('–∫–∞–∫')) {
                return 'ü§î –° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –ø–æ–º–æ–≥—É! –Ø –º–æ–≥—É:\n‚Ä¢ –ù–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–ª—É–± –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º\n‚Ä¢ –ü–æ–º–æ—á—å —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –∫–ª—É–±–∞\n‚Ä¢ –ü–æ–¥—Å–∫–∞–∑–∞—Ç—å –∏–¥–µ–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n‚Ä¢ –ù–∞–π—Ç–∏ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤\n\n–ü—Ä–æ—Å—Ç–æ —Å–ø—Ä–æ—Å–∏—Ç–µ: "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–±?" –∏–ª–∏ "–ì–¥–µ –Ω–∞–π—Ç–∏ –ª—é–¥–µ–π —Å –ø–æ—Ö–æ–∂–∏–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏?"';
            }
            return 'üîç –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å –æ –∫–ª—É–±–∞—Ö, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏–ª–∏ –ø–æ–∏—Å–∫–µ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤.';
        }

        function setProcessingState(processing) {
            isProcessing = processing;
            if (processing) {
                sendBtn.innerHTML = '‚è≥';
                sendBtn.disabled = true;
                input.disabled = true;
            } else {
                sendBtn.innerHTML = 'üì§';
                sendBtn.disabled = false;
                input.disabled = false;
            }
        }
    </script>
</body>
</html>