#!/usr/bin/env python3
"""
üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–û–õ–ù–û–ì–û –†–ê–ë–û–ß–ï–ì–û –ü–†–û–¶–ï–°–°–ê –° –£–õ–£–ß–®–ï–ù–ù–´–ú AI
"""

import os
import sys
import json
from pathlib import Path

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ Django –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(str(Path(__file__).parent))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'core.settings')

import django
django.setup()

from actionable_ai_consultant import ActionableAIConsultant

def test_complete_workflow():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞ —á–µ—Ä–µ–∑ AI"""
    print("üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–û–õ–ù–û–ì–û –†–ê–ë–û–ß–ï–ì–û –ü–†–û–¶–ï–°–°–ê")
    print("=" * 60)

    ai = ActionableAIConsultant()

    # –®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–±
    print("\n1. üß™ –®–ê–ì: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–±")
    print("-" * 40)
    message1 = "–ü—Ä–∏–≤–µ—Ç! –•–æ—á—É —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–Ω-–∫–ª—É–± –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é"
    response1 = ai.process_user_message(message1)
    print(f"‚úÖ AI –æ—Ç–≤–µ—Ç: {response1[:100]}...")

    # –®–∞–≥ 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞
    print("\n2. üß™ –®–ê–ì: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞")
    print("-" * 40)
    club_form = """–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª—É–±–∞: –ö–æ–¥–µ—Ä—ã –ë—É–¥—É—â–µ–≥–æ
–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª—É–±–∞: –ö–ª—É–± –¥–ª—è –º–æ–ª–æ–¥—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –∏ —ç–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –ú—ã –ø—Ä–æ–≤–æ–¥–∏–º —Ö–∞–∫–∞—Ç–æ–Ω—ã, –æ–±—É—á–∞—é—â–∏–µ —Å–µ—Å—Å–∏–∏, code review –∏ –ø–æ–º–æ–≥–∞–µ–º –≤ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤ IT-—Å—Ñ–µ—Ä–µ. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤!

–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
–ì–æ—Ä–æ–¥: –ê–ª–º–∞—Ç—ã
Email –∫–ª—É–±–∞: coders.future.almaty@gmail.com
–¢–µ–ª–µ—Ñ–æ–Ω: +7 (701) 123-45-67
–ê–¥—Ä–µ—Å: –ê–ª–º–∞—Ç—ã, –ø—Ä–æ—Å–ø–µ–∫—Ç –î–æ—Å—Ç—ã–∫ 123
–î–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –û–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é, —Ö–∞–∫–∞—Ç–æ–Ω—ã, –º–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ
–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è: –ú–æ–ª–æ–¥—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã 18-35 –ª–µ—Ç
–†–∞–∑–≤–∏–≤–∞–µ–º—ã–µ –Ω–∞–≤—ã–∫–∏: –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, teamwork, problem-solving
–¢–µ–≥–∏: programming, python, javascript, hackathons"""
    response2 = ai.process_user_message(club_form)
    print(f"‚úÖ AI –æ—Ç–≤–µ—Ç: {response2[:100]}...")

    # –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—É–±–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    print("\n3. üß™ –®–ê–ì: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—É–±–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö")
    print("-" * 40)

    # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª—É–±–µ –∏–∑ —Ñ–æ—Ä–º—ã
    club_info = ai.extract_club_info(club_form)

    # –°–æ–∑–¥–∞–µ–º –∫–ª—É–± –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    result = ai.create_club_in_database(club_info, "user@example.com")

    if result["success"]:
        print(f"‚úÖ –ö–ª—É–± —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω: {result['name']}")
        print(f"üìã ID –∫–ª—É–±–∞: {result['club_id']}")
        print(f"üìç –ì–æ—Ä–æ–¥: {result['city']}")
        print(f"üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {result['category']}")
        print(f"üìß Email: {result['email']}")

        # –ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –∫–ª—É–± –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω
        from clubs.models import Club
        try:
            club = Club.objects.get(id=result['club_id'])
            print(f"‚úÖ –ö–ª—É–± –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ: {club.name}")
            print(f"‚úÖ –°—Ç–∞—Ç—É—Å: {club.status}")
            print(f"‚úÖ –£—á–∞—Å—Ç–Ω–∏–∫–∏: {club.members_count}")
        except Club.DoesNotExist:
            print("‚ùå –ö–ª—É–± –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö")

    else:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞: {result['error']}")

    # –®–∞–≥ 4: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ —Å–≤–æ–∏—Ö –∫–ª—É–±–∞—Ö
    print("\n4. üß™ –®–ê–ì: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ —Å–≤–æ–∏—Ö –∫–ª—É–±–∞—Ö")
    print("-" * 40)
    message4 = "–ü–æ–∫–∞–∂–∏ –º–æ–∏ –∫–ª—É–±—ã"
    response4 = ai.process_user_message(message4)
    print(f"‚úÖ AI –æ—Ç–≤–µ—Ç: {response4[:100]}...")

    # –®–∞–≥ 5: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç —Å–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
    print("\n5. üß™ –®–ê–ì: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç —Å–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ")
    print("-" * 40)
    event_form = """–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è: Python Hackathon 2025
–û–ø–∏—Å–∞–Ω–∏–µ: –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π —Ö–∞–∫–∞—Ç–æ–Ω –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –∏ –æ–ø—ã—Ç–Ω—ã—Ö Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ö–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –ø–æ–ª—É—á–∞—Ç—å –º–µ–Ω—Ç–æ—Ä—Å–∫—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç—å—Å—è –∑–∞ –ø—Ä–∏–∑—ã.

–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è: 2025-12-20 10:00
–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è: –ê–ª–º–∞—Ç—ã, Tech Hub, —É–ª. –ö–∞–±–∞–Ω–±–∞–π –±–∞—Ç—ã—Ä–∞ 97"""
    response5 = ai.process_user_message(event_form)
    print(f"‚úÖ AI –æ—Ç–≤–µ—Ç: {response5[:100]}...")

    print("\nüéâ –ü–û–õ–ù–´–ô –†–ê–ë–û–ß–ò–ô –ü–†–û–¶–ï–°–° –ü–†–û–ô–î–ï–ù –£–°–ü–ï–®–ù–û!")
    print("=" * 60)

if __name__ == "__main__":
    try:
        test_complete_workflow()
    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: {e}")
        import traceback
        traceback.print_exc()