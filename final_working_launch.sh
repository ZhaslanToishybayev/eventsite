#!/bin/bash

# üöÄ –§–ò–ù–ê–õ–¨–ù–´–ô –†–ê–ë–û–ß–ò–ô –ó–ê–ü–£–°–ö DJANGO –° –ê–ö–¢–ò–í–ê–¶–ò–ï–ô –û–ö–†–£–ñ–ï–ù–ò–Ø

echo "üöÄ –§–ò–ù–ê–õ–¨–ù–´–ô –†–ê–ë–û–ß–ò–ô –ó–ê–ü–£–°–ö DJANGO"
echo "=================================="
echo ""

# 1. –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
echo "üêç –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
source venv/bin/activate

# 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
export DJANGO_SETTINGS_MODULE=core.settings
export PYTHONPATH=/var/www/myapp/eventsite:$PYTHONPATH

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º Django
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Django..."
python manage.py check --deploy 2>/dev/null && echo "‚úÖ Django –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞" || echo "‚ö†Ô∏è Django –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞"

# 4. –ó–∞–ø—É—Å–∫–∞–µ–º Django
echo ""
echo "üöÄ –ó–ê–ü–£–°–ö DJANGO DEVELOPMENT SERVER"
echo "=================================="
echo ""

echo "üì° –ó–∞–ø—É—Å–∫–∞—é Django development server..."
echo "üåê –°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ:"
echo "   ‚Ä¢ http://127.0.0.1:8000"
echo "   ‚Ä¢ http://localhost:8000"
echo "   ‚Ä¢ https://fan-club.kz (—á–µ—Ä–µ–∑ Nginx)"
echo ""
echo "üí° –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"
echo "‚è≥ –ó–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-30 —Å–µ–∫—É–Ω–¥..."
echo ""

# –ó–∞–ø—É—Å–∫–∞–µ–º Django
python manage.py runserver 0.0.0.0:8000