#!/usr/bin/env python3
"""
üì± –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï MOBILE-–ê–î–ê–ü–¢–ê–¶–ò–ò –£–õ–£–ß–®–ï–ù–ù–û–ì–û AI
"""

import os
import sys
from pathlib import Path

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ Django –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(str(Path(__file__).parent))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'core.settings')

import django
django.setup()

from actionable_ai_consultant import ActionableAIConsultant

def test_mobile_functionality():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º –º–æ–±–∏–ª—å–Ω—É—é –∞–¥–∞–ø—Ç–∞—Ü–∏—é AI —Å–∏—Å—Ç–µ–º—ã"""
    print("üì± –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï MOBILE-–ê–î–ê–ü–¢–ê–¶–ò–ò –£–õ–£–ß–®–ï–ù–ù–û–ì–û AI")
    print("=" * 60)

    ai = ActionableAIConsultant()

    # –¢–µ—Å—Ç 1: –ö–æ—Ä–æ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Ç–∏–ø–∏—á–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö)
    print("\n1. üì± –¢–ï–°–¢: –ö–æ—Ä–æ—Ç–∫–∏–µ –º–æ–±–∏–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è")
    print("-" * 40)

    mobile_messages = [
        "–ü—Ä–∏–≤–µ—Ç",
        "–°–æ–∑–¥–∞—Ç—å –∫–ª—É–±",
        "–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ",
        "–ü–æ–º–æ—â—å",
        "–ö–ª—É–±—ã",
        "–°–æ–∑–¥–∞–π —Ñ–∞–Ω-–∫–ª—É–± –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é"
    ]

    for i, message in enumerate(mobile_messages, 1):
        print(f"\nüìù –°–æ–æ–±—â–µ–Ω–∏–µ {i}: {message}")
        response = ai.process_user_message(message)
        print(f"‚úÖ –û—Ç–≤–µ—Ç: {response[:80]}...")

    # –¢–µ—Å—Ç 2: –§–æ—Ä–º–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (–∫—Ä–∞—Ç–∫–∞—è)
    print("\n\n2. üì± –¢–ï–°–¢: –ú–æ–±–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞")
    print("-" * 40)

    mobile_club_form = """–ù–∞–∑–≤–∞–Ω–∏–µ: –ú–æ–±–∏–ª—å–Ω—ã–µ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏
–û–ø–∏—Å–∞–Ω–∏–µ: –ö–ª—É–± –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ iOS –∏ Android
–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
–ì–æ—Ä–æ–¥: –ê–ª–º–∞—Ç—ã
Email: mobile.dev@kz.kz"""

    print(f"üìù –ú–æ–±–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞:\n{mobile_club_form}")
    response = ai.process_user_message(mobile_club_form)
    print(f"‚úÖ –û—Ç–≤–µ—Ç: {response[:100]}...")

    # –¢–µ—Å—Ç 3: Emoji –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    print("\n\n3. üì± –¢–ï–°–¢: Emoji –ø–æ–¥–¥–µ—Ä–∂–∫–∞")
    print("-" * 40)

    emoji_messages = [
        "–ü—Ä–∏–≤–µ—Ç! üëã –•–æ—á—É —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–± üèÜ",
        "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ? üìÖ",
        "–ü–æ–º–æ—â—å –ø–æ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ üí∞",
        "–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å ü§ñ"
    ]

    for i, message in enumerate(emoji_messages, 1):
        print(f"\nüìù –°–æ–æ–±—â–µ–Ω–∏–µ {i}: {message}")
        response = ai.process_user_message(message)
        print(f"‚úÖ –û—Ç–≤–µ—Ç: {response[:80]}...")

    # –¢–µ—Å—Ç 4: –¢–∏–ø–∏—á–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
    print("\n\n4. üì± –¢–ï–°–¢: –¢–∏–ø–∏—á–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏")
    print("-" * 40)

    mobile_scenarios = [
        "–•–æ—á—É —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–Ω-–∫–ª—É–±, –∫–∞–∫ –Ω–∞—á–∞—Ç—å?",
        "–ú–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ —á–µ—Ä–µ–∑ AI?",
        "–ö–∞–∫ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å –∫–ª—É–±?",
        "–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—É–±–∞?",
        "–ù—É–∂–µ–Ω –ª–∏ –ø–ª–∞—Ç–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞?"
    ]

    for i, scenario in enumerate(mobile_scenarios, 1):
        print(f"\nüìù –°—Ü–µ–Ω–∞—Ä–∏–π {i}: {scenario}")
        response = ai.process_user_message(scenario)
        print(f"‚úÖ –û—Ç–≤–µ—Ç: {response[:80]}...")

    # –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
    print("\n\n5. üì± –¢–ï–°–¢: –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π")
    print("-" * 40)

    validation_tests = [
        "",  # –ü—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        "   ",  # –¢–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª—ã
        "a" * 1001,  # –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        "<script>alert('test')</script>",  # –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ–µ
        "DROP TABLE users;",  # SQL –∏–Ω—ä–µ–∫—Ü–∏—è
        "javascript:alert('test')"  # JavaScript –∏–Ω—ä–µ–∫—Ü–∏—è
    ]

    for i, test in enumerate(validation_tests, 1):
        print(f"\nüìù –í–∞–ª–∏–¥–∞—Ü–∏—è {i}: –î–ª–∏–Ω–∞={len(test)}")
        try:
            response = ai.process_user_message(test)
            print(f"‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ—Ç–≤–µ—Ç: {response[:50]}...")
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

    print("\nüéâ MOBILE-–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!")
    print("=" * 60)

def test_mobile_ui_elements():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"""
    print("\nüì± –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï MOBILE UI –≠–õ–ï–ú–ï–ù–¢–û–í")
    print("=" * 50)

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
    ai = ActionableAIConsultant()

    test_messages = [
        "–ü—Ä–∏–≤–µ—Ç",
        "–°–æ–∑–¥–∞–π –∫–ª—É–±",
        "–ß—Ç–æ —É–º–µ–µ—Ç —ç—Ç–æ—Ç AI?"
    ]

    print("\nüìè –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö:")
    for message in test_messages:
        response = ai.process_user_message(message)
        lines = response.count('\n')
        chars = len(response)
        words = len(response.split())

        print(f"\nüìù –°–æ–æ–±—â–µ–Ω–∏–µ: {message}")
        print(f"   –°–∏–º–≤–æ–ª–æ–≤: {chars} | –°–ª–æ–≤: {words} | –°—Ç—Ä–æ–∫: {lines}")

        # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
        if chars > 1000:
            print("   ‚ö†Ô∏è  –û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö")
        elif chars > 500:
            print("   üí° –û—Ç–≤–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã")
        else:
            print("   ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç")

        if lines > 20:
            print("   ‚ö†Ô∏è  –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞")
        elif lines > 10:
            print("   üí° –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫")
        else:
            print("   ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç")

if __name__ == "__main__":
    try:
        test_mobile_functionality()
        test_mobile_ui_elements()
    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞: {e}")
        import traceback
        traceback.print_exc()