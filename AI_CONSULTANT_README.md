# ü§ñ –ò–ò-–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è UnitySphere

## –û–±–∑–æ—Ä

–ò–ò-–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç - —ç—Ç–æ —É–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã UnitySphere, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç:
- –ù–∞—Ö–æ–¥–∏—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∫–ª—É–±—ã –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º
- –ö–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–ª—É–±–∞–º–∏
- –†–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è—Ö
- –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install openai python-dotenv
```

–ò–ª–∏ —á–µ—Ä–µ–∑ requirements:
```bash
pip install -r requirements-ai.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cp .env.example .env
```

–î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –Ω–æ–≤—ã–π OpenAI API –∫–ª—é—á –≤ `.env`:

```env
# OpenAI Configuration
OPENAI_API_KEY=[REDACTED]
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7

# AI Consultant Settings
AI_CONSULTANT_ENABLED=True
AI_CONSULTANT_MAX_HISTORY_MESSAGES=10
AI_CONSULTANT_MAX_SESSIONS_PER_USER=50
```

### 3. –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
python manage.py makemigrations ai_consultant
python manage.py migrate
```

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ò–ò-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞

```bash
python manage.py init_ai_consultant
```

### 5. –°–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

```bash
python manage.py collectstatic
```

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
python manage.py runserver
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `settings.py`:

```python
# OpenAI Configuration
OPENAI_API_KEY = os.getenv('OPENAI_API_KEY')
OPENAI_MODEL = os.getenv('OPENAI_MODEL', 'gpt-3.5-turbo')
OPENAI_MAX_TOKENS = int(os.getenv('OPENAI_MAX_TOKENS', '1000'))
OPENAI_TEMPERATURE = float(os.getenv('OPENAI_TEMPERATURE', '0.7'))

# AI Consultant Settings
AI_CONSULTANT_ENABLED = os.getenv('AI_CONSULTANT_ENABLED', 'True').lower() == 'true'
AI_CONSULTANT_MAX_HISTORY_MESSAGES = int(os.getenv('AI_CONSULTANT_MAX_HISTORY_MESSAGES', '10'))
AI_CONSULTANT_MAX_SESSIONS_PER_USER = int(os.getenv('AI_CONSULTANT_MAX_SESSIONS_PER_USER', '50'))
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å** –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
2. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —á–∞—Ç–∞** üí¨ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
3. **–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å** –ò–ò-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç—É

### –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤:
- "–ö–∞–∫–∏–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∫–ª—É–±—ã –µ—Å—Ç—å –≤ –ê–ª–º–∞—Ç—ã?"
- "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –∫–ª—É–±?"
- "–†–∞—Å—Å–∫–∞–∂–∏ –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ñ–µ—Å—Ç–∏–≤–∞–ª—è—Ö"
- "–ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞?"

## üîå API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

- `POST /api/v1/ai/chat/` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `GET /api/v1/ai/chat/?session_id=UUID` - –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞
- `GET /api/v1/ai/sessions/` - –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/ai/sessions/create/` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
- `DELETE /api/v1/ai/sessions/<uuid>/delete/` - —É–¥–∞–ª–∏—Ç—å —Å–µ—Å—Å–∏—é
- `GET /api/v1/ai/statistics/` - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API:

```javascript
// –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
const response = await fetch('/api/v1/ai/chat/', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-CSRFToken': getCSRFToken()
    },
    body: JSON.stringify({
        message: '–ö–∞–∫–∏–µ –∫–ª—É–±—ã –µ—Å—Ç—å –≤ –ê–ª–º–∞—Ç—ã?',
        session_id: 'optional-session-uuid'
    })
});

const data = await response.json();
console.log(data.message); // –û—Ç–≤–µ—Ç –æ—Ç –ò–ò
```

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –≤–∏–¥–∂–µ—Ç–∞:

–§–∞–π–ª—ã —Å—Ç–∏–ª–µ–π –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤:
- `static/css/ai-chat-widget.css` - —Å—Ç–∏–ª–∏ –≤–∏–¥–∂–µ—Ç–∞
- `static/js/ai-chat-widget.js` - –ª–æ–≥–∏–∫–∞ –≤–∏–¥–∂–µ—Ç–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ò–ò:

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
`–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí AI Consultant ‚Üí AI contexts`

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤:

```python
# ai_consultant/services.py
def _get_default_system_context(self) -> str:
    return """
    –í–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∑–¥–µ—Å—å...
    """
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:

1. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Django** - —Ä–∞–∑–¥–µ–ª "AI Consultant"
2. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç** `/api/v1/ai/statistics/`
3. **–ñ—É—Ä–Ω–∞–ª –ª–æ–≥–æ–≤** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ú–µ—Ç—Ä–∏–∫–∏:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã OpenAI
- –°—Ç–æ–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ API –∫–ª—é—á–∞:
- ‚úÖ –ö–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –§–∞–π–ª `.env` –∏—Å–∫–ª—é—á–µ–Ω –∏–∑ Git
- ‚úÖ –ö–ª—é—á –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –¢–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- CSRF –∑–∞—â–∏—Ç–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### OpenAI GPT-3.5-turbo:
- ~$0.002 –∑–∞ 1,000 —Ç–æ–∫–µ–Ω–æ–≤
- ~$30 –≤ –º–µ—Å—è—Ü –Ω–∞ 1,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ~$0.01 –∑–∞ —Ç–∏–ø–∏—á–Ω—ã–π –¥–∏–∞–ª–æ–≥

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤:
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## üîß Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **"API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `.env` —Ñ–∞–π–ª–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `OPENAI_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

2. **"–ò–ò –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å OpenAI
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ OpenAI

3. **"–í–∏–¥–∂–µ—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è"**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```python
import logging
logger = logging.getLogger('ai_consultant')

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f logs/ai_consultant.log
```

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **RAG —Å–∏—Å—Ç–µ–º–∞** —Å –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
2. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–≥–æ —è–∑—ã–∫–∞**
3. **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**
4. **–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**
5. **–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

### Roadmap:

- **v1.1**: –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (ChromaDB)
- **v1.2**: –ö–∞–∑–∞—Ö—Å–∫–∏–π —è–∑—ã–∫
- **v1.3**: –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥
- **v2.0**: –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é OpenAI API
3. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

---

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ API –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ –∏–ª–∏ –∫–æ–º–º–∏—Ç–∏—Ç–µ –∏—Ö –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π!