#!/usr/bin/env python3
"""
ü§ñ –£–õ–£–ß–®–ï–ù–ù–´–ô AI –ö–û–ù–°–£–õ–¨–¢–ê–ù–¢ –° –ò–ù–¢–ï–ì–†–ê–¶–ò–ï–ô –ë–ê–ó–´ –î–ê–ù–ù–´–•
"""

import os
import sys
import json
import re
from datetime import datetime
from pathlib import Path

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ Django –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(str(Path(__file__).parent))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'core.settings')

import django
django.setup()

from clubs.models import Club, ClubCategory, City, ClubEvent
from accounts.models import CustomUser
from django.contrib.auth import get_user_model
import openai
from dotenv import load_dotenv

User = get_user_model()
load_dotenv()

class EnhancedAIConsultant:
    def __init__(self):
        self.client = openai.OpenAI(api_key=os.getenv('OPENAI_API_KEY'))
        self.model = "gpt-4o-mini"
        self.conversation_history = []

    def get_user_context(self, user_email=None):
        """–ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
        try:
            if user_email:
                user = User.objects.filter(email=user_email).first()
            else:
                user = None

            context = {
                'user_info': None,
                'user_clubs': [],
                'recommended_clubs': [],
                'upcoming_events': [],
                'personalized_tips': []
            }

            if user:
                # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                context['user_info'] = {
                    'name': f"{user.first_name} {user.last_name}".strip(),
                    'email': user.email,
                    'phone': user.phone,
                    'is_active': user.is_active,
                    'date_joined': user.date_joined.strftime('%Y-%m-%d') if user.date_joined else None
                }

                # –ö–ª—É–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                user_clubs = Club.objects.filter(creater=user, is_active=True)
                context['user_clubs'] = [
                    {
                        'name': club.name,
                        'category': club.category.name,
                        'members_count': club.members_count,
                        'city': club.city.name if club.city else '–ù–µ —É–∫–∞–∑–∞–Ω',
                        'created_at': club.created_at.strftime('%Y-%m-%d')
                    }
                    for club in user_clubs
                ]

            # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–ª—É–±—ã (–ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º)
            popular_categories = ClubCategory.objects.filter(
                club__is_active=True
            ).annotate(
                club_count=models.Count('club')
            ).order_by('-club_count')[:5]

            recommended_clubs = Club.objects.filter(
                is_active=True,
                category__in=popular_categories
            ).select_related('category', 'city')[:10]

            context['recommended_clubs'] = [
                {
                    'name': club.name,
                    'category': club.category.name,
                    'city': club.city.name if club.city else '–ù–µ —É–∫–∞–∑–∞–Ω',
                    'members_count': club.members_count,
                    'description': club.description[:100] + '...' if len(club.description) > 100 else club.description,
                    'activities': club.activities,
                    'target_audience': club.target_audience
                }
                for club in recommended_clubs
            ]

            # –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
            upcoming_events = ClubEvent.objects.filter(
                date__gte=datetime.now()
            ).select_related('club', 'club__category')[:5]

            context['upcoming_events'] = [
                {
                    'name': event.name,
                    'club': event.club.name,
                    'category': event.club.category.name,
                    'date': event.date.strftime('%Y-%m-%d %H:%M'),
                    'location': event.location,
                    'description': event.description[:80] + '...' if len(event.description) > 80 else event.description
                }
                for event in upcoming_events
            ]

            # –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã
            context['personalized_tips'] = self.generate_personalized_tips(user, context)

            return context

        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")
            return {}

    def generate_personalized_tips(self, user, context):
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã"""
        tips = []

        if user and context.get('user_clubs'):
            tips.append("üî• –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª—É–±—ã! –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏—Ö –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.")
            tips.append("üìä –†–µ–≥—É–ª—è—Ä–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –≤–∞—à–∏—Ö –∫–ª—É–±–∞—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏.")

        if not context.get('user_clubs'):
            tips.append("üéØ –ù–∞—á–Ω–∏—Ç–µ —Å —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞ –ø–æ –≤–∞—à–µ–π —Å–∞–º–æ–π –ª—é–±–∏–º–æ–π —Ç–µ–º–µ - —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –º–æ—Ç–∏–≤–∞—Ü–∏—é.")

        if context.get('recommended_clubs'):
            tips.append("üí° –ò–∑—É—á–∏—Ç–µ —É—Å–ø–µ—à–Ω—ã–µ –∫–ª—É–±—ã –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ –¥–ª—è –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫.")

        tips.extend([
            "üë• –ê–∫—Ç–∏–≤–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ - –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É –ª—é–±–æ–≥–æ —Ñ–∞–Ω-–∫–ª—É–±–∞",
            "üìÖ –ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–µ—Å–∞",
            "üì± –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –¥–ª—è –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –∫–ª—É–±–∞",
            "üéÅ –û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ –∫–æ–Ω–∫—É—Ä—Å—ã –∏ —Ä–æ–∑—ã–≥—Ä—ã—à–∏ –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
        ])

        return tips[:5]  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º 5 —Å–æ–≤–µ—Ç–∞–º–∏

    def get_enhanced_ai_response(self, message, user_email=None):
        """–£–ª—É—á—à–µ–Ω–Ω—ã–π AI –æ—Ç–≤–µ—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
        try:
            # –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user_context = self.get_user_context(user_email)

            # –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
            context_prompt = self.build_context_prompt(user_context)

            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞
            message_lower = message.lower().strip()

            if any(keyword in message_lower for keyword in ['–Ω–∞–π—Ç–∏', '–ø–æ–∏—Å–∫', '—Ä–µ–∫–æ–º–µ–Ω–¥', '—Å–æ–≤–µ—Ç']):
                return self.get_club_recommendations(message, user_context)
            elif any(keyword in message_lower for keyword in ['–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏', '—Å–æ–±—ã—Ç–∏', 'event']):
                return self.get_event_suggestions(message, user_context)
            elif any(keyword in message_lower for keyword in ['—Å–æ–∑–¥–∞—Ç—å', '—Å–¥–µ–ª–∞—Ç—å', '—Å–æ–∑–¥–∞–Ω–∏–µ']):
                return self.get_creation_advice(message, user_context)
            elif any(keyword in message_lower for keyword in ['–∏–¥–µ–∏', '–≤–¥–æ—Ö–Ω–æ–≤', '—á—Ç–æ –º–æ–∂–Ω–æ']):
                return self.get_creative_ideas(message, user_context)
            elif any(keyword in message_lower for keyword in ['–º–æ–Ω–µ—Ç–∏–∑', '–∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å', '–¥–µ–Ω—å–≥–∏']):
                return self.get_monetization_advice(message, user_context)
            else:
                # –û–±—â–∏–π AI –æ—Ç–≤–µ—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
                return self.get_general_response(message, context_prompt)

        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI –æ—Ç–≤–µ—Ç–∞: {e}")
            return self.get_fallback_response()

    def build_context_prompt(self, user_context):
        """–°—Ç—Ä–æ–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø—Ä–æ–º–ø—Ç"""
        context_parts = []

        # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        if user_context.get('user_info'):
            user_info = user_context['user_info']
            context_parts.append(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user_info['name']} ({user_info['email']})")
            if user_info.get('phone'):
                context_parts.append(f"–¢–µ–ª–µ—Ñ–æ–Ω: {user_info['phone']}")

        # –ö–ª—É–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if user_context.get('user_clubs'):
            clubs_info = []
            for club in user_context['user_clubs']:
                clubs_info.append(f"{club['name']} ({club['category']}, {club['members_count']} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)")
            context_parts.append(f"–í–∞—à–∏ –∫–ª—É–±—ã: {'; '.join(clubs_info)}")

        # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–ª—É–±—ã
        if user_context.get('recommended_clubs'):
            recommended_info = []
            for club in user_context['recommended_clubs'][:3]:  # –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 3
                recommended_info.append(f"{club['name']} - {club['category']} –≤ {club['city']} ({club['members_count']} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)")
            context_parts.append(f"–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–ª—É–±—ã: {'; '.join(recommended_info)}")

        # –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
        if user_context.get('upcoming_events'):
            events_info = []
            for event in user_context['upcoming_events'][:3]:
                events_info.append(f"{event['name']} –≤ {event['club']} ({event['date']})")
            context_parts.append(f"–°–æ–±—ã—Ç–∏—è: {'; '.join(events_info)}")

        return " | ".join(context_parts) if context_parts else "–ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"

    def get_club_recommendations(self, message, user_context):
        """–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫–ª—É–±–æ–≤"""
        clubs = user_context.get('recommended_clubs', [])
        if not clubs:
            return """üòî –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–ª—É–±–æ–≤ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

–ù–æ –≤—ã –º–æ–∂–µ—Ç–µ:
1. **–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –∫–ª—É–±** –≤ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–π –≤–∞—Å —Ç–µ–º–∞—Ç–∏–∫–µ
2. **–ü–æ–¥–æ–∂–¥–∞—Ç—å** - –Ω–æ–≤—ã–µ –∫–ª—É–±—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
3. **–†–∞—Å—Å–∫–∞–∑–∞—Ç—å –¥—Ä—É–∑—å—è–º** - –≤–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–∏ –∑–∞—Ö–æ—Ç—è—Ç —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–±

–•–æ—á–µ—à—å –ø–æ–º–æ—â—å –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–ª—É–±–∞? –ù–∞–ø–∏—à–∏: "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–± –ø–æ –º—É–∑—ã–∫–µ?" –∏–ª–∏ –ø–æ –¥—Ä—É–≥–æ–π —Ç–µ–º–µ! üéØ"""

        recommendations = []
        for i, club in enumerate(clubs[:5], 1):
            recommendations.append(f"""**{i}. {club['name']}** üèÜ
‚Ä¢ **–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** {club['category']}
‚Ä¢ **–ì–æ—Ä–æ–¥:** {club['city']}
‚Ä¢ **–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤:** {club['members_count']} —á–µ–ª–æ–≤–µ–∫
‚Ä¢ **–ß–µ–º –∑–∞–Ω–∏–º–∞—é—Ç—Å—è:** {club['description']}
‚Ä¢ **–î–ª—è –∫–æ–≥–æ:** {club['target_audience']}

üîó –ß—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è, –Ω–∞–ø–∏—à–∏: "–•–æ—á—É –≤—Å—Ç—É–ø–∏—Ç—å –≤ {club['name']}"
""")

        response = f"""üéØ –û—Ç–ª–∏—á–Ω–æ! –í–æ—Ç {len(recommendations)} —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö –∫–ª—É–±–∞ –¥–ª—è –≤–∞—Å:

{''.join(recommendations)}

üí° **–°–æ–≤–µ—Ç:** –ù–∞—á–Ω–∏—Ç–µ —Å –∫–ª—É–±–∞, –∫–æ—Ç–æ—Ä—ã–π –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–∏–º –∏–Ω—Ç–µ—Ä–µ—Å–∞–º. –ù–µ –±–æ–π—Ç–µ—Å—å –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –≤ —á–∞—Ç–µ –∫–ª—É–±–∞!

–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –≤—ã–±–æ—Ä–æ–º –∏–ª–∏ —Ö–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –æ –¥—Ä—É–≥–∏—Ö –∫–ª—É–±–∞—Ö? –ù–∞–ø–∏—à–∏: "–ü–æ–∫–∞–∂–∏ –±–æ–ª—å—à–µ –∫–ª—É–±–æ–≤" –∏–ª–∏ "–ù–∞–π–¥–∏ –∫–ª—É–±—ã –ø–æ –º—É–∑—ã–∫–µ" üéµ"""

        return response

    def get_event_suggestions(self, message, user_context):
        """–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π"""
        events = user_context.get('upcoming_events', [])
        if not events:
            return """üìÖ –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ.

–ù–æ –≤—ã –º–æ–∂–µ—Ç–µ:
1. **–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ** –≤ —Å–≤–æ–µ–º –∫–ª—É–±–µ
2. **–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–¥–µ—é** –¥–ª—è –±—É–¥—É—â–∏—Ö —Å–æ–±—ã—Ç–∏–π
3. **–°–æ–∑–¥–∞—Ç—å –∫–ª—É–±** –∏ —Å–∞–º–æ–º—É –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è

üéØ **–ò–¥–µ–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π:**
‚Ä¢ –í–µ—á–µ—Ä –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –∏–≥—Ä
‚Ä¢ –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—Å—Ç—Ä–µ—á–∞
‚Ä¢ –û–Ω–ª–∞–π–Ω-—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –∫–æ–Ω—Ü–µ—Ä—Ç–∞
‚Ä¢ –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å
‚Ä¢ –§–ª–µ—à–º–æ–±

–•–æ—á–µ—à—å –ø–æ–º–æ—â—å –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è? –ù–∞–ø–∏—à–∏: "–ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –≤ –∫–ª—É–±–µ?" üéâ"""

        event_list = []
        for event in events:
            event_list.append(f"""**{event['name']}** üìÖ
‚Ä¢ **–ö–ª—É–±:** {event['club']} ({event['category']})
‚Ä¢ **–î–∞—Ç–∞:** {event['date']}
‚Ä¢ **–ú–µ—Å—Ç–æ:** {event['location']}
‚Ä¢ **–û–ø–∏—Å–∞–Ω–∏–µ:** {event['description']}

üéØ –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏, –Ω–∞–ø–∏—à–∏: "–†–∞—Å—Å–∫–∞–∂–∏ –æ {event['name']}"
""")

        response = f"""üéâ –û—Ç–ª–∏—á–Ω–æ! –í–æ—Ç {len(events)} –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π:

{''.join(event_list)}

üí° **–°–æ–≤–µ—Ç:** –†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—Å–µ—Ç–∏—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ - —ç—Ç–æ –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∫–ª—É–±–æ–º –∏ –µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏!

–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –æ –¥—Ä—É–≥–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏–ª–∏ –ø–æ–º–æ—á—å —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π? –ù–∞–ø–∏—à–∏: "–ò–¥–µ–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π" –∏–ª–∏ "–ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ?" üéä"""

        return response

    def get_creation_advice(self, message, user_context):
        """–°–æ–≤–µ—Ç—ã –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–≤–æ–∏ –∫–ª—É–±—ã
        user_clubs = user_context.get('user_clubs', [])

        if user_clubs:
            return f"""üî• –û—Ç–ª–∏—á–Ω–æ! –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –æ–ø—ã—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–æ–≤! –í—ã —Å–æ–∑–¥–∞–ª–∏ {len(user_clubs)} –∫–ª—É–±(–∞):

{''.join([f"‚Ä¢ {club['name']} ({club['category']}, {club['members_count']} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)\n" for club in user_clubs])}

**üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è:**
1. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∫–∞–∫–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—èÊúÄÂèóÊ¨¢Ëøé?
2. **–†–∞—Å—à–∏—Ä—è–π—Ç–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—é** - —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∏–ª–∏–∞–ª—ã –≤ –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–∞—Ö
3. **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è** - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–ª–∞—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏–ª–∏ –º–µ—Ä—á
4. **–ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–∞** - —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞–π—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–ª—É–±–∞–º–∏
5. **–û–Ω–ª–∞–π–Ω-—Ñ–æ—Ä–º–∞—Ç—ã** - —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –∏ –æ–Ω–ª–∞–π–Ω-–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è

–•–æ—á–µ—à—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –∏–ª–∏ –ø–æ–º–æ—â—å —Å –Ω–æ–≤—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º? –ù–∞–ø–∏—à–∏: "–ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –∫–ª—É–±–∞" –∏–ª–∏ "–ò–¥–µ–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–ª—É–±–∞" üí°"""

        return """üöÄ –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä! –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–Ω-–∫–ª—É–±–∞ - —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!

**üéØ –ü–æ—à–∞–≥–æ–≤—ã–π –≥–∞–π–¥:**

**1. –û–ø—Ä–µ–¥–µ–ª–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—é:**
‚Ä¢ –í—ã–±–µ—Ä–∏ —É–∑–∫—É—é –Ω–∏—à—É (–Ω–µ "–º—É–∑—ã–∫–∞", –∞ "—Ä–æ–∫ 90-—Ö" –∏–ª–∏ "—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –º—É–∑—ã–∫–∞")
‚Ä¢ –ò–∑—É—á–∏ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é (18-25 –ª–µ—Ç, —Å—Ç—É–¥–µ–Ω—Ç—ã, –º–æ–ª–æ–¥—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã)
‚Ä¢ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ

**2. –ü—Ä–∏–¥—É–º–∞–π —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:**
‚Ä¢ –û–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–º–∏–Ω–∞—é—â–∏–º—Å—è –∏ –æ—Ç—Ä–∞–∂–∞—Ç—å —Å—É—Ç—å
‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö
‚Ä¢ –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –∑–∞–Ω—è—Ç–æ

**3. –°–æ–∑–¥–∞–π –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å:**
‚Ä¢ –õ–æ–≥–æ—Ç–∏–ø –∏ —Ñ–∏—Ä–º–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞
‚Ä¢ –°–ª–æ–≥–∞–Ω –∏ –º–∏—Å—Å–∏—è
‚Ä¢ –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è

**4. –í—ã–±–µ—Ä–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:**
‚Ä¢ Instagram –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚Ä¢ Telegram –¥–ª—è –æ–±—â–µ–Ω–∏—è
‚Ä¢ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
‚Ä¢ Discord –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞

**5. –ù–∞—á–Ω–∏ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
‚Ä¢ –ü–æ—Å—Ç 3-5 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
‚Ä¢ –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: –Ω–æ–≤–æ—Å—Ç–∏, –æ–ø—Ä–æ—Å—ã, –∫–æ–Ω–∫—É—Ä—Å—ã
‚Ä¢ –í–æ–≤–ª–µ–∫–∞–π –ø–µ—Ä–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

üí° **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç:** –ù–∞—á–Ω–∏ —Å –º–∞–ª–æ–≥–æ - —Å–æ–±–µ—Ä–∏ 10-20 –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –ø–æ—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä—É–π!

–•–æ—á–µ—à—å, –ø–æ–º–æ–≥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é? –ù–∞–ø–∏—à–∏, –∫–∞–∫–∞—è —É —Ç–µ–±—è —Ç–µ–º–∞—Ç–∏–∫–∞! üéØ"""

    def get_creative_ideas(self, message, user_context):
        """–¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –∏–¥–µ–∏"""
        return """üí° –í–æ—Ç —Ç–æ–ø –∏–¥–µ–π –¥–ª—è —Ñ–∞–Ω-–∫–ª—É–±–æ–≤ –≤ 2025 –≥–æ–¥—É:

**üéµ –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ:**
‚Ä¢ –§–∞–Ω-–∫–ª—É–± –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø—ã (–Ω–µ –∂–∞–Ω—Ä–∞, –∞ –∏–º–µ–Ω–Ω–æ –≥—Ä—É–ø–ø—ã)
‚Ä¢ –ö–ª—É–± —Å–ª—É—à–∞—Ç–µ–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ó–æ–ª–æ—Ç–∞—è —ç—Ä–∞ —Ä–æ–∫–∞")
‚Ä¢ –ö–ª—É–± –ª—é–±–∏—Ç–µ–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
‚Ä¢ –ö–ª—É–± –ø–æ –∏—Ç–∞–ª—å—è–Ω—Å–∫–æ–π/–∫–æ—Ä–µ–π—Å–∫–æ–π/—è–ø–æ–Ω—Å–∫–æ–π –º—É–∑—ã–∫–µ
‚Ä¢ –ö–ª—É–± —Ñ–∞–Ω–∞—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**‚öΩ –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ:**
‚Ä¢ –§–∞–Ω-–∫–ª—É–± –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã (–Ω–µ –≤–∏–¥–∞ —Å–ø–æ—Ä—Ç–∞)
‚Ä¢ –ö–ª—É–± –±–µ–≥—É–Ω–æ–≤/–≤–µ–ª–æ—Å–∏–ø–µ–¥–∏—Å—Ç–æ–≤/–ø–ª–∞–≤—Ü–æ–≤
‚Ä¢ –ö–ª—É–± –ª—é–±–∏—Ç–µ–ª–µ–π —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –≤–∏–¥–æ–≤ —Å–ø–æ—Ä—Ç–∞
‚Ä¢ –ö–ª—É–± –±–æ–ª–µ–ª—å—â–∏–∫–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å—Ç–∞–¥–∏–æ–Ω–∞
‚Ä¢ –ö–ª—É–± —Ñ–∏—Ç–Ω–µ—Å–∞ –∏ –∑–¥–æ—Ä–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏

**üéÆ –ì–µ–π–º–µ—Ä—Å–∫–∏–µ:**
‚Ä¢ –ö–ª—É–± –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä–µ (–Ω–µ –∂–∞–Ω—Ä—É)
‚Ä¢ –ö–ª—É–± –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
‚Ä¢ –ö–ª—É–± –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –∏–≥—Ä
‚Ä¢ –ö–ª—É–± –≤–∏–Ω—Ç–∞–∂–Ω—ã—Ö –∏–≥—Ä
‚Ä¢ –ö–ª—É–± —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç-–º–µ–π–∫–µ—Ä–æ–≤

**üé® –¢–≤–æ—Ä—á–µ—Å–∫–∏–µ:**
‚Ä¢ –ö–ª—É–± –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤
‚Ä¢ –§–æ—Ç–æ–≥—Ä–∞—Ñ—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∂–∞–Ω—Ä–∞ (—É–ª–∏—á–Ω–∞—è, –ø–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è)
‚Ä¢ –ü–∏—Å–∞—Ç–µ–ª–∏ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∏/–¥–µ—Ç–µ–∫—Ç–∏–≤–∞/—Ä–æ–º–∞–Ω–æ–≤
‚Ä¢ –î–∏–∑–∞–π–Ω–µ—Ä—ã –∏ –≤–µ—Ä—Å—Ç–∞–ª—å—â–∏–∫–∏
‚Ä¢ –ö–ª—É–± handmade –∏ —Ä—É–∫–æ–¥–µ–ª–∏—è

**üìö –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ:**
‚Ä¢ –ö–Ω–∏–∂–Ω—ã–µ –∫–ª—É–±—ã –ø–æ –∂–∞–Ω—Ä–∞–º
‚Ä¢ –ö–ª—É–± –ª—é–±–∏—Ç–µ–ª–µ–π –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –∏–≥—Ä
‚Ä¢ –ö–ª—É–± –∏–∑—É—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤
‚Ä¢ –ö–ª—É–± –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤
‚Ä¢ –ö–ª—É–± —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—è –∏ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

**üåü –ù–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
‚Ä¢ –ö–ª—É–±—ã –ø–æ —Å–µ—Ä–∏–∞–ª–∞–º/—Ñ–∏–ª—å–º–∞–º
‚Ä¢ –ö–ª—É–±—ã –ø–æ –ø–æ–¥–∫–∞—Å—Ç–∞–º
‚Ä¢ –ö–ª—É–±—ã –ø–æ –±–ª–æ–≥–µ—Ä–∞–º/–∏–Ω—Ñ–ª—é–µ–Ω—Å–µ—Ä–∞–º
‚Ä¢ –ö–ª—É–±—ã –ø–æ —Ö–æ–±–±–∏ (–∫—É–ª–∏–Ω–∞—Ä–∏—è, —Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–æ, —Ä—É–∫–æ–¥–µ–ª–∏–µ)
‚Ä¢ –ö–ª—É–±—ã –ø–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è–º –∏ —Ç—É—Ä–∏–∑–º—É

**üî• –¢—Ä–µ–Ω–¥—ã 2025:**
‚Ä¢ –ö–ª—É–±—ã –ø–æ AI –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º
‚Ä¢ –≠–∫–æ-–∫–ª—É–±—ã –∏ —É—Å—Ç–æ–π—á–∏–≤–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ
‚Ä¢ –ú–µ–¥–∏—Ç–∞—Ü–∏—è –∏ mindfulness
‚Ä¢ –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã –∏ –±–ª–æ–∫—á–µ–π–Ω
‚Ä¢ –ö–æ—Å–ø–ª–µ–π –∏ –∞–Ω–∏–º–µ-–∫—É–ª—å—Ç—É—Ä–∞

–ö–∞–∫–∞—è –∏–∑ —ç—Ç–∏—Ö –∏–¥–µ–π —Ç–µ–±–µ –±–ª–∏–∂–µ? –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ - –ø–æ–º–æ–≥—É —Ä–∞–∑–≤–∏—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é! üöÄ"""

    def get_monetization_advice(self, message, user_context):
        """–°–æ–≤–µ—Ç—ã –ø–æ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏"""
        return """üí∞ –û—Ç–ª–∏—á–Ω–æ! –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è —Ñ–∞–Ω-–∫–ª—É–±–∞ - –≤–∞–∂–Ω—ã–π —à–∞–≥ –∫ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏:

**üéØ –°–ø–æ—Å–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∫–∞:**

**1. –ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
‚Ä¢ –î–æ–±—Ä–æ–≤–æ–ª—å–Ω—ã–µ –≤–∑–Ω–æ—Å—ã –æ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚Ä¢ –ö—Ä–∞—É–¥—Ñ–∞–Ω–¥–∏–Ω–≥ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
‚Ä¢ –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ( Patreon, Boosty)
‚Ä¢ "–ö—É–ø–∏—Ç—å –∫–æ—Ñ–µ" —Ñ—É–Ω–∫—Ü–∏—è

**2. –ü—Ä–µ–º–∏—É–º-—É—Å–ª—É–≥–∏:**
‚Ä¢ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚Ä¢ –û–Ω–ª–∞–π–Ω-–∫—É—Ä—Å—ã –∏ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã
‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç—ã–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º

**3. –†–µ–∫–ª–∞–º–∞ –∏ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ:**
‚Ä¢ –†–µ–∫–ª–∞–º–∞ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ (—É–º–µ—Ä–µ–Ω–Ω–æ!)
‚Ä¢ –ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ —Å –±—Ä–µ–Ω–¥–∞–º–∏
‚Ä¢ –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –≤–∞—à–µ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏
‚Ä¢ –ê—Ñ—Ñ–∏–ª–∏–∞—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã

**4. –ú–µ—Ä—á –∏ —Ç–æ–≤–∞—Ä—ã:**
‚Ä¢ –§–∏—Ä–º–µ–Ω–Ω–∞—è –æ–¥–µ–∂–¥–∞ –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã
‚Ä¢ –°—É–≤–µ–Ω–∏—Ä–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è
‚Ä¢ –¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã (—Å—Ç–∏–∫–µ—Ä—ã, –æ–±–æ–∏)
‚Ä¢ –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏ —Å –¥–∏–∑–∞–π–Ω–µ—Ä–∞–º–∏

**5. –ü–ª–∞—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è:**
‚Ä¢ –í–æ—Ä–∫—à–æ–ø—ã –∏ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã
‚Ä¢ –ö–æ–Ω—Ü–µ—Ä—Ç—ã –∏ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è
‚Ä¢ –¢—É—Ä–Ω–∏—Ä—ã —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º –≤–∑–Ω–æ—Å–æ–º
‚Ä¢ –≠–∫—Å–∫—É—Ä—Å–∏–∏ –∏ –ø–æ–µ–∑–¥–∫–∏

**üí° –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏:**

**–≠—Ç–∞–ø 1 (0-3 –º–µ—Å—è—Ü–∞):** –§–æ–∫—É—Å –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
**–≠—Ç–∞–ø 2 (3-6 –º–µ—Å—è—Ü–µ–≤):** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–Ω—ã—Ö —É—Å–ª—É–≥
**–≠—Ç–∞–ø 3 (6+ –º–µ—Å—è—Ü–µ–≤):** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

**üî• –¢–û–ü-—Å–æ–≤–µ—Ç—ã:**
1. –ù–µ –Ω–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ - —Å–Ω–∞—á–∞–ª–∞ –ø–æ—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–≤–µ—Ä–∏–µ
2. –ü—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –¥–µ–Ω—å–≥–∏
3. –ë—É–¥—å—Ç–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã –≤ —Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤
4. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏
5. –°–ª—É—à–∞–π—Ç–µ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

–•–æ—á–µ—à—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ç–≤–æ–µ–≥–æ –∫–ª—É–±–∞? –ù–∞–ø–∏—à–∏: "–ü–ª–∞–Ω –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ [–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–ª—É–±–∞]" üíº"""

    def get_general_response(self, message, context_prompt):
        """–û–±—â–∏–π AI –æ—Ç–≤–µ—Ç"""
        try:
            response = self.client.chat.completions.create(
                model=self.model,
                messages=[
                    {
                        "role": "system",
                        "content": f"""–¢—ã - AI –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¶–µ–Ω—Ç—Ä —Å–æ–æ–±—â–µ—Å—Ç–≤ (fan-club.kz).
–¢—ã –ø–æ–º–æ–≥–∞–µ—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º, —Ä–∞–∑–≤–∏—Ç–∏–µ–º –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ñ–∞–Ω-–∫–ª—É–±–æ–≤ –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ.
–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {context_prompt}

–¢—ã –æ—Ç–≤–µ—á–∞–µ—à—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –¥—Ä—É–∂–µ–ª—é–±–Ω–æ, –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –ø–æ –¥–µ–ª—É.
–ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è.
–ü—Ä–µ–¥–ª–∞–≥–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ –∏ —Å–æ–≤–µ—Ç—ã.
–ë—É–¥—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏ —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–º."""
                    },
                    {
                        "role": "user",
                        "content": message
                    }
                ],
                max_tokens=1500,
                temperature=0.7
            )

            return response.choices[0].message.content

        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ OpenAI API: {e}")
            return self.get_fallback_response()

    def get_fallback_response(self):
        """–†–µ–∑–µ—Ä–≤–Ω—ã–π –æ—Ç–≤–µ—Ç"""
        return """üòî –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —è –Ω–µ –º–æ–≥—É –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞—à –∑–∞–ø—Ä–æ—Å.

–ù–æ –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ:
1. **–ù–∞–ø–∏—Å–∞—Ç—å —Å–Ω–æ–≤–∞** - –≤–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞
2. **–ó–∞–¥–∞—Ç—å –¥—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å** - —è –ø–æ–º–æ–≥—É —Å –ª—é–±—ã–º–∏ —Ç–µ–º–∞–º–∏ –æ —Ñ–∞–Ω-–∫–ª—É–±–∞—Ö
3. **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–ª—É–±—ã** - –º–æ–∂–µ—Ç –Ω–∞–π–¥–µ—Ç–µ —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ
4. **–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –∫–ª—É–±** - –Ω–∞—á–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ

üöÄ –ö–∞–∫ —è –º–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º —Å–µ–≥–æ–¥–Ω—è?"""

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if __name__ == "__main__":
    ai = EnhancedAIConsultant()

    # –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    test_questions = [
        "–ü—Ä–∏–≤–µ—Ç",
        "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–Ω-–∫–ª—É–±?",
        "–ù–∞–π–¥–∏ –º–Ω–µ –∫–ª—É–±—ã –ø–æ –º—É–∑—ã–∫–µ",
        "–ò–¥–µ–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π",
        "–ö–∞–∫ –º–æ–Ω–µ—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª—É–±?",
        "–†–∞—Å—Å–∫–∞–∂–∏ –æ —Ç–∞–Ω—Ü–∞—Ö"
    ]

    print("ü§ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ AI –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞\n")

    for question in test_questions:
        print(f"‚ùì –í–æ–ø—Ä–æ—Å: {question}")
        response = ai.get_enhanced_ai_response(question, "test@fan-club.kz")
        print(f"üí¨ –û—Ç–≤–µ—Ç: {response[:200]}...")
        print("-" * 80)