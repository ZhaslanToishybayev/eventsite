{% load static %}
<!DOCTYPE html>
<html lang="zxx" class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="{% static 'images/favicon-32x32.png' %}">
    <meta name="author" content="colorlib">
    <meta name="description" content="UnitySphere - fan-club.kz">
    <meta name="keywords" content="—Ñ–∞–Ω-–∫–ª—É–±—ã, —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è">
    <meta charset="UTF-8">
    {% csrf_token %}
    <meta name="csrf-token" content="{{ csrf_token }}">

    {% block head_title %}
    <title>{% block title %}UnitySphere - fan-club.kz{% endblock %}</title>
    {% endblock head_title %}

    <script src="https://kit.fontawesome.com/77b427ccd5.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    {% block styles %}
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'css/template_css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/linearicons.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/nice-select.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/owl.carousel.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/jquery-ui.css' %}">
    <link rel="stylesheet" href="{% static 'css/template_css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/our_css/style.css' %}">

    <!-- Enhanced Professional Chat Widget Styles -->
    <!-- –í—Å–µ —Å—Ç–∏–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π CSS –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ -->
    {% endblock %}

    {% block extra_head %}
    {% endblock %}
</head>
<body class="bg-white">
    {% block header %}
    <header id="header" id="home">
        <div class="container">
            <div class="row align-items-center justify-content-between d-flex">
                <div id="logo">
                    <a href="/"><img src="{% static 'images/fanclub_horizontal.png' %}" alt="" title="" style="max-width: 150px;" /></a>
                </div>
                <nav id="nav-menu-container">
                    <ul class="nav-menu">
                        <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="{% url 'clubs' %}">–°–æ–æ–±—â–µ—Å—Ç–≤–∞</a></li>
                        <li><a href="{% url 'festivals' %}">–§–µ—Å—Ç–∏–≤–∞–ª–∏</a></li>
                        <li><a href="{% url 'publications' %}">–ü—É–±–ª–∏–∫–∞—Ü–∏–∏</a></li>
                        <li><a href="/admin/">–ê–¥–º–∏–Ω</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    {% endblock %}

    {% block body %}
    {% endblock %}

    {% block content %}
    {% endblock %}

    {% block footer %}
    <footer class="footer-area section-gap">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>–û —Å–∞–π—Ç–µ</h6>
                        <p>
                            UnitySphere - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–Ω-–∫–ª—É–±–∞–º–∏, —Å–æ–æ–±—â–µ—Å—Ç–≤–∞–º–∏ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏.
                        </p>
                    </div>
                </div>
                <div class="col-lg-5 col-md-6 col-sm-6">
                    <div class="single-footer-widget">
                        <h6>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h6>
                        <p>
                            –≥. –ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω<br>
                            Email: info@fan-club.kz
                        </p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
                <p class="footer-text m-0">
                    Copyright &copy; 2025 All rights reserved
                </p>
            </div>
        </div>
    </footer>
    {% endblock %}

    {% block scripts %}
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="{% static 'css/template_css/bootstrap.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.ajaxchimp.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.nice-select.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.sticky.js' %}"></script>
    <script src="{% static 'css/template_css/nouislider.min.js' %}"></script>
    <script src="{% static 'css/template_css/owl.carousel.min.js' %}"></script>
    <script src="{% static 'css/template_css/jquery.ajaxchimp.min.js' %}"></script>
    <script src="{% static 'css/template_css/mail-script.js' %}"></script>
    <script src="{% static 'css/template_css/main.js' %}"></script>

    <!-- Enhanced Chat Widget Scripts -->
    <script src="{% static 'js/enhanced-chat-widget.js' %}?v=6.0.0"></script>

    <!-- Initialize Enhanced Chat Widget -->
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeEnhancedWidget);
        } else {
            initializeEnhancedWidget();
        }
    </script>
    {% endblock %}

    {% block extra_scripts %}
    {% endblock %}
</head>

<body class="bg-white">
    <!-- üé® ENHANCED MODERN CHAT WIDGET -->
    <style>
        /* üé® CSS Variables –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ */
        :root {
            /* üéØ –ë—Ä–µ–Ω–¥–æ–≤—ã–µ —Ü–≤–µ—Ç–∞ - –≥–ª—É–±–æ–∫–∏–π —Å–∏–Ω–∏–π –¥–ª—è —Ç–≤–µ—Ä–¥–æ–≥–æ, –Ω–µ —Å—Ç–µ–∫–ª—è–Ω–Ω–æ–≥–æ –≤–∏–¥–∞ */
            --primary-color: #1e40af;        /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π */
            --primary-gradient-start: #1e40af;  /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π –¥–ª—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ */
            --primary-gradient-end: #3b82f6;    /* –°–≤–µ—Ç–ª–æ-—Å–∏–Ω–∏–π –¥–ª—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ */
            --secondary-color: #64748b;      /* –°–µ—Ä–æ-—Å–∏–Ω–∏–π */
            --accent-color: #f59e0b;         /* –ó–æ–ª–æ—Ç–∏—Å—Ç—ã–π –∞–∫—Ü–µ–Ω—Ç */
            --success-color: #10b981;        /* –ò–∑—É–º—Ä—É–¥–Ω—ã–π */
            --text-primary: #0f172a;         /* –¢–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç */
            --text-secondary: #475569;       /* –í—Ç–æ—Ä–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç */
            --text-light: #ffffff;           /* –°–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç */
            --bg-primary: #ffffff;           /* –ß–∏—Å—Ç—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω */
            --bg-secondary: #ffffff;         /* –ß–∏—Å—Ç—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω */
            --bg-tertiary: #ffffff;          /* –ß–∏—Å—Ç—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω */
            --border-color: #e2e8f0;         /* –¶–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü */
            --shadow-light: rgba(37, 99, 235, 0.1);
            --shadow-medium: rgba(37, 99, 235, 0.2);
            --shadow-heavy: rgba(37, 99, 235, 0.3);
            --notification-dot: #10b981;     /* –¶–≤–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */

            /* üìè –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å—Ç—É–ø–æ–≤ */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-xxl: 48px;

            /* üé≠ –ê–Ω–∏–º–∞—Ü–∏–∏ */
            --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);

            /* üì± –†–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ */
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;

            /* üéØ –¢–µ–Ω–∏ */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1), 0 5px 10px rgba(0,0,0,0.05);
            --shadow-xl: 0 20px 25px rgba(0,0,0,0.1), 0 10px 10px rgba(0,0,0,0.04);
            --shadow-2xl: 0 25px 50px rgba(0,0,0,0.15);
        }

        /* üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
        @media (prefers-color-scheme: dark) {
            :root {
                --primary-color: #3b82f6;        /* –°–≤–µ—Ç–ª–æ-—Å–∏–Ω–∏–π */
                --primary-gradient-start: #1e40af;  /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π –¥–ª—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ */
                --primary-gradient-end: #3b82f6;    /* –°–≤–µ—Ç–ª–æ-—Å–∏–Ω–∏–π –¥–ª—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ */
                --text-primary: #f1f5f9;         /* –°–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç */
                --text-secondary: #cbd5e1;       /* –í—Ç–æ—Ä–∏—á–Ω—ã–π —Å–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç */
                --text-light: #ffffff;           /* –°–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç */
                --bg-primary: #0f172a;           /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω */
                --bg-secondary: #1e293b;         /* –¢–µ–º–Ω—ã–π –≤—Ç–æ—Ä–∏—á–Ω—ã–π —Ñ–æ–Ω */
                --bg-tertiary: #334155;          /* –¢–µ–º–Ω—ã–π —Ç—Ä–µ—Ç–∏—á–Ω—ã–π —Ñ–æ–Ω */
                --border-color: #334155;         /* –¶–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ */
                --shadow-light: rgba(37, 99, 235, 0.3);
                --shadow-medium: rgba(37, 99, 235, 0.4);
                --shadow-heavy: rgba(37, 99, 235, 0.5);
                --notification-dot: #34d399;     /* –ó–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ */
            }
        }

        /* –†—É—á–Ω–∞—è —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ */
        .dark-theme {
            --primary-color: #3b82f6;
            --primary-gradient-start: #1e40af;
            --primary-gradient-end: #3b82f6;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-light: #ffffff;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --border-color: #334155;
            --shadow-light: rgba(37, 99, 235, 0.3);
            --shadow-medium: rgba(37, 99, 235, 0.4);
            --shadow-heavy: rgba(37, 99, 235, 0.5);
            --notification-dot: #34d399;
        }

        /* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω –≤–∏–¥–∂–µ—Ç–∞ */
        .modern-widget-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-gradient-start) 0%, var(--primary-color) 100%);
            border: none;
            border-radius: 50px;
            color: var(--text-light);
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 8px 25px var(--shadow-medium), 0 2px 8px rgba(0,0,0,0.1);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            /* backdrop-filter —ç—Ñ—Ñ–µ–∫—Ç—ã —É–¥–∞–ª–µ–Ω—ã –¥–ª—è —Ç–≤–µ—Ä–¥–æ–≥–æ –≤–∏–¥–∞ */
            animation: pulse-glow 4s ease-in-out infinite;
            overflow: hidden;
        }

        .notification-dot {
            position: absolute;
            top: 6px;
            right: 6px;
            width: 12px;
            height: 12px;
            background: var(--notification-dot);
            border-radius: 50%;
            border: 2px solid var(--bg-primary);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            animation: notificationPulse 2s infinite;
            display: none;
        }

        @keyframes notificationPulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        .modern-widget-button:hover {
            transform: scale(1.12) rotate(3deg);
            box-shadow: 0 12px 35px var(--shadow-heavy), 0 4px 12px rgba(0,0,0,0.15);
            animation-play-state: paused;
        }
        .modern-widget-button:active {
            transform: scale(0.95) rotate(0deg);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 8px 25px var(--shadow-light), 0 2px 8px rgba(0,0,0,0.1);
            }
            50% {
                box-shadow: 0 12px 35px var(--shadow-medium), 0 4px 12px rgba(0,0,0,0.15);
            }
        }

        @keyframes widgetEntrance {
            from {
                opacity: 0;
                transform: scale(0.5) translateY(50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes buttonHoverGlow {
            0% {
                box-shadow: 0 8px 25px var(--shadow-light), 0 2px 8px rgba(0,0,0,0.1);
            }
            100% {
                box-shadow: 0 12px 35px var(--shadow-heavy), 0 4px 12px rgba(0,0,0,0.15);
            }
        }

        @keyframes chatSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
                right: -100px;
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
                right: 24px;
            }
        }

        @keyframes chatSlideOut {
            from {
                opacity: 1;
                transform: translateY(0) scale(1);
                right: 24px;
            }
            to {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
                right: -100px;
            }
        }

        .modern-widget-chat {
            position: fixed;
            bottom: 110px;
            right: 24px;
            width: 420px;
            height: 650px;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15), 0 8px 32px rgba(0,0,0,0.1);
            z-index: 9998;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--border-color);
            /* –£–¥–∞–ª—è–µ–º backdrop-filter –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–µ–∫–ª—è–Ω–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ */
            animation: slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modern-widget-header {
            background: linear-gradient(135deg, var(--primary-gradient-start) 0%, var(--primary-color) 100%);
            color: var(--text-light);
            padding: 20px 24px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            flex-shrink: 0;
        }
        .modern-widget-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(255,255,255,0.2);
        }
        .modern-widget-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .modern-widget-status {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: statusPulse 2s infinite;
        }

        @keyframes statusPulse {
            0%, 80%, 100% { opacity: 0.5; }
            40% { opacity: 1; }
        }

        .modern-widget-close {
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 8px;
            color: var(--text-light);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            /* –£–¥–∞–ª—è–µ–º –≤—Å–µ backdrop-filter —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –±–æ–ª–µ–µ —á–µ—Ç–∫–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ */
        }
        .modern-widget-close:hover {
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg);
        }

        .modern-widget-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: transparent;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .modern-widget-message {
            max-width: 85%;
            padding: 14px 18px;
            border-radius: 20px;
            font-size: 14px;
            line-height: 1.5;
            position: relative;
            animation: messageSlideIn 0.3s ease-out;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modern-widget-bot-message {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            color: var(--text-primary);
            align-self: flex-start;
            border: 1px solid var(--border-color);
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .modern-widget-user-message {
            background: linear-gradient(135deg, var(--primary-gradient-start) 0%, var(--primary-color) 100%);
            color: var(--text-light);
            align-self: flex-end;
            border: 1px solid rgba(37, 99, 235, 0.2);
            box-shadow: 0 2px 8px var(--shadow-light);
        }

        .modern-widget-typing {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            align-self: flex-start;
            background: var(--bg-secondary);
            border-radius: 18px;
            border: 1px solid var(--border-color);
        }
        .modern-widget-typing-text {
            font-size: 13px;
            color: var(--text-secondary);
            font-style: italic;
        }
        .modern-widget-typing-dots {
            display: flex;
            gap: 4px;
        }
        .modern-widget-typing-dot {
            width: 6px;
            height: 6px;
            background: var(--secondary-color);
            border-radius: 50%;
            animation: typing 1.4s ease-in-out infinite;
        }
        .modern-widget-typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .modern-widget-typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-6px); opacity: 1; }
        }

        .modern-widget-input {
            display: flex;
            padding: 16px 20px 20px;
            background: var(--bg-primary);
            border-top: 1px solid var(--border-color);
            gap: 12px;
        }
        .modern-widget-input-field {
            flex: 1;
            border: 2px solid var(--border-color);
            border-radius: 28px;
            padding: 12px 20px;
            outline: none;
            font-size: 14px;
            transition: all 0.2s ease;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        .modern-widget-input-field:focus {
            border-color: var(--primary-color);
            background: var(--bg-primary);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
        }
        .modern-widget-input-field::placeholder {
            color: var(--text-secondary);
            opacity: 0.7;
        }
        .modern-widget-send-btn {
            background: linear-gradient(135deg, var(--primary-gradient-start) 0%, var(--primary-color) 100%);
            color: var(--text-light);
            border: none;
            border-radius: 28px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 50px;
            box-shadow: 0 2px 8px var(--shadow-light);
        }
        .modern-widget-send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-medium);
        }
        .modern-widget-send-btn:active {
            transform: translateY(0);
        }
        .modern-widget-send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .modern-widget-features {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(245, 158, 11, 0.08);
            padding: 8px 16px;
            font-size: 12px;
            color: var(--accent-color);
            text-align: center;
            border-bottom: 1px solid rgba(245, 158, 11, 0.2);
            z-index: 10;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        @keyframes particleFloat {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            50% { opacity: 0.8; }
            100% { transform: translate(var(--vx, 0), var(--vy, 0)) scale(0); opacity: 0; }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .modern-widget-chat {
                width: calc(100vw - 48px);
                right: 24px;
                bottom: 100px;
                max-height: 500px;
            }
            .modern-widget-button {
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
        }
    </style>

    <button class="modern-widget-button" id="modernWidgetButton" title="AI –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç">
        üí¨
        <div class="notification-dot" id="notificationDot" style="display: none;"></div>
</button>

    <div class="modern-widget-chat" id="modernWidgetChat" style="display: none;">
        <div class="modern-widget-header">
            <h3 style="color: var(--text-light);">AI –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</h3>
            <div style="display: flex; align-items: center; gap: 8px;">
                <div class="modern-widget-status"></div>
                <span style="font-size: 12px; opacity: 0.8; color: var(--text-light);">–û–Ω–ª–∞–π–Ω</span>
            </div>
            <button class="modern-widget-close" id="modernWidgetClose">‚úï</button>
        </div>
        <div class="modern-widget-messages" id="modernWidgetMessages">
            <div class="modern-widget-message modern-widget-bot-message">
                <div>üëã –ü—Ä–∏–≤–µ—Ç! –Ø - AI –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç UnitySphere.</div>
                <div style="margin-top: 4px; font-size: 12px; opacity: 0.7;">–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å–æ–∑–¥–∞—Ç—å –≤–∞—à –∏–¥–µ–∞–ª—å–Ω—ã–π –∫–ª—É–±! üí´</div>
            </div>
            <div class="modern-widget-message modern-widget-bot-message">
                <div>‚ú® <strong>–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:</strong></div>
                <div style="margin-top: 4px; font-size: 12px;">
                    ‚Ä¢ üè† –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∫–ª—É–±–æ–≤<br>
                    ‚Ä¢ üìã –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–ª—É–±–∞<br>
                    ‚Ä¢ üí¨ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º<br>
                    ‚Ä¢ üîç –ü–æ–∏—Å–∫ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤
                </div>
            </div>
        </div>
        <div class="modern-widget-input">
            <input type="text" id="modernWidgetInput" class="modern-widget-input-field" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..." maxlength="500">
            <button id="modernWidgetSend" class="modern-widget-send-btn">üì§</button>
        </div>
    </div>

    <script>
        // üöÄ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞
        let isOpen = false;
        let sessionId = 'modern_' + Math.random().toString(36).substr(2, 9);
        let isProcessing = false;
        let messageHistory = [];

        const button = document.getElementById('modernWidgetButton');
        const chat = document.getElementById('modernWidgetChat');
        const messages = document.getElementById('modernWidgetMessages');
        const input = document.getElementById('modernWidgetInput');
        const sendBtn = document.getElementById('modernWidgetSend');
        const closeBtn = document.getElementById('modernWidgetClose');

        // –û—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å —á–∞—Ç
        button.addEventListener('click', toggleChat);
        closeBtn.addEventListener('click', toggleChat);

        function toggleChat() {
            if (isOpen) {
                chat.style.display = 'none';
                isOpen = false;
                // –ü–ª–∞–≤–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
                setTimeout(() => {
                    if (!isOpen) {
                        chat.style.animation = 'slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) reverse';
                    }
                }, 100);
            } else {
                chat.style.display = 'flex';
                chat.style.animation = 'slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)';
                isOpen = true;
                input.focus();
                // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
                if (messages.children.length === 2) {
                    setTimeout(() => {
                        addMessage('üí° –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ –∫–ª—É–±–∞—Ö, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏–ª–∏ –ø–æ–∏—Å–∫–µ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤!', 'bot');
                    }, 1000);
                }
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        sendBtn.addEventListener('click', sendMessage);
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        input.addEventListener('input', function() {
            sendBtn.disabled = !input.value.trim() || isProcessing;
            // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ç–µ–∫—Å—Ç–∞
            sendBtn.style.opacity = input.value.trim() && !isProcessing ? '1' : '0.6';
        });

        function sendMessage() {
            const message = input.value.trim();
            if (!message || isProcessing) return;

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            addMessage(message, 'user');
            messageHistory.push({ role: 'user', content: message });
            input.value = '';
            setProcessingState(true);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –≤ localStorage
            localStorage.setItem('widgetHistory_' + sessionId, JSON.stringify(messageHistory));

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø–µ—á–∞—Ç–∏
            setTimeout(() => {
                showTypingIndicator();
                setTimeout(() => {
                    removeTypingIndicator();
                    const response = generateSmartResponse(message);
                    addMessage(response, 'bot');
                    messageHistory.push({ role: 'bot', content: response });
                    setProcessingState(false);
                }, 1500 + Math.random() * 1000); // –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
            }, 300);
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'modern-widget-typing';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div style="font-size: 12px; color: var(--text-secondary); margin-right: 8px;">AI</div>
                <div class="modern-widget-typing-dots">
                    <div class="modern-widget-typing-dot"></div>
                    <div class="modern-widget-typing-dot"></div>
                    <div class="modern-widget-typing-dot"></div>
                </div>
            `;
            messages.appendChild(typingDiv);
            messages.scrollTop = messages.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `modern-widget-message modern-widget-${sender}-message`;
            messageDiv.innerHTML = text;
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;

            // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                messageDiv.style.animation = 'messageSlideIn 0.3s ease-out';
            }, 50);
        }

        function generateSmartResponse(userMessage) {
            const message = userMessage.toLowerCase();
            const clubKeywords = ['–∫–ª—É–±', '—Å–æ–æ–±—â–µ—Å—Ç–≤–æ', '–≥—Ä—É–ø–ø–∞', '—Ñ–∞–Ω', '—Ñ–∞–Ω-–∫–ª—É–±'];
            const eventKeywords = ['–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ', '—Ñ–µ—Å—Ç–∏–≤–∞–ª—å', '—Å–æ–±—ã—Ç–∏–µ', '–≤—Å—Ç—Ä–µ—á–∞', '–∫–æ–Ω—Ü–µ—Ä—Ç'];
            const helpKeywords = ['–ø–æ–º–æ—â—å', '–ø–æ–º–æ–≥–∏', '–∫–∞–∫', '—á—Ç–æ', '–≥–¥–µ', '–∫–æ–≥–¥–∞'];

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            const hasClubKeywords = clubKeywords.some(keyword => message.includes(keyword));
            const hasEventKeywords = eventKeywords.some(keyword => message.includes(keyword));
            const hasHelpKeywords = helpKeywords.some(keyword => message.includes(keyword));

            if (hasClubKeywords || message.includes('—Å–æ–∑–¥–∞—Ç—å')) {
                return `üè† –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä! –í–æ—Ç —á—Ç–æ —è –º–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–æ –∫–ª—É–±–∞–º:\n\n<b>‚ú® –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—É–±–∞:</b>\n‚Ä¢ –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–°–æ–æ–±—â–µ—Å—Ç–≤–∞"\n‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –∫–ª—É–±"\n‚Ä¢ –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –∫–ª—É–±–µ\n‚Ä¢ –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –ø–µ—Ä–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤\n\n<b>üéØ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</b>\n‚Ä¢ –ú—É–∑—ã–∫–∞ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–æ\n‚Ä¢ –°–ø–æ—Ä—Ç –∏ –∑–¥–æ—Ä–æ–≤—å–µ\n‚Ä¢ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–≥—Ä—ã\n‚Ä¢ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ\n\n–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –ø–æ–º–æ–≥ —Å–æ–∑–¥–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–ª—É–±–∞?`;
            }

            if (hasEventKeywords || message.includes('–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏')) {
                return `üéâ –û—Ç–ª–∏—á–Ω–æ! –í–æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö:\n\n<b>üìÖ –¢–µ–∫—É—â–∏–µ —Ñ–µ—Å—Ç–∏–≤–∞–ª–∏:</b>\n‚Ä¢ –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ —Ñ–µ—Å—Ç–∏–≤–∞–ª–∏ –∫–∞–∂–¥—ã–µ –≤—ã—Ö–æ–¥–Ω—ã–µ\n‚Ä¢ –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è\n‚Ä¢ –¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –≤–µ—á–µ—Ä–∞\n‚Ä¢ –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è\n\n<b>üí° –°–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:</b>\n‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é\n‚Ä¢ –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø–ª–æ—â–∞–¥–∫—É\n‚Ä¢ –ü—Ä–æ–¥—É–º–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É\n‚Ä¢ –°–¥–µ–ª–∞–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–µ–∫–ª–∞–º—É\n\n–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ç–∏–ø–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è?`;
            }

            if (hasHelpKeywords || message.includes('–∫–∞–∫')) {
                return `ü§î –° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –ø–æ–º–æ–≥—É! –í–æ—Ç —á—Ç–æ —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å:\n\n<b>üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</b>\n‚Ä¢ –ù–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–ª—É–± –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º\n‚Ä¢ –ü–æ–º–æ—á—å —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –∫–ª—É–±–∞\n‚Ä¢ –ü–æ–¥—Å–∫–∞–∑–∞—Ç—å –∏–¥–µ–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n‚Ä¢ –ù–∞–π—Ç–∏ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤\n‚Ä¢ –î–∞—Ç—å —Å–æ–≤–µ—Ç—ã –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é —Å–æ–æ–±—â–µ—Å—Ç–≤–∞\n\n<b>üìã –ü—Ä–æ—Å—Ç–æ —Å–ø—Ä–æ—Å–∏—Ç–µ:</b>\n‚Ä¢ "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–±?"\n‚Ä¢ "–ì–¥–µ –Ω–∞–π—Ç–∏ –ª—é–¥–µ–π —Å –ø–æ—Ö–æ–∂–∏–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏?"\n‚Ä¢ "–ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ?"\n‚Ä¢ "–ß—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ —Å—Ä–µ–¥–∏ —Ñ–∞–Ω–∞—Ç–æ–≤?"`;
            }

            if (message.includes('—Å–ø–∞—Å–∏–±–æ') || message.includes('–±–ª–∞–≥–æ–¥–∞—Ä')) {
                return `üôè –ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –†–∞–¥ –±—ã–ª –ø–æ–º–æ—á—å!\n\nüí° –ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –µ—â–µ assistance, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ. –Ø –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å:\n‚Ä¢ –ü–æ–∏—Å–∫–æ–º –∫–ª—É–±–æ–≤ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n‚Ä¢ –°–æ–≤–µ—Ç–∞–º–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å–æ–æ–±—â–µ—Å—Ç–≤\n‚Ä¢ –ò–¥–µ—è–º–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –≤–∞—à–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\n\n‚ú® –•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è –∏ —É—Å–ø–µ—à–Ω—ã—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏–π!`;
            }

            if (message.includes('–ø–æ–∫–∞') || message.includes('–¥–æ—Å–≤–∏–¥–∞–Ω–∏—è') || message.includes('—Ö–≤–∞—Ç–∏—Ç')) {
                return `üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –ë—ã–ª —Ä–∞–¥ –ø–æ–æ–±—â–∞—Ç—å—Å—è!\n\nüí° –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å, –∫–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–º–æ—â—å —Å –∫–ª—É–±–∞–º–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏ –∏–ª–∏ –ø–æ–∏—Å–∫–æ–º –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤.\n\n‚ú® UnitySphere –≤—Å–µ–≥–¥–∞ –∫ –≤–∞—à–∏–º —É—Å–ª—É–≥–∞–º!`;
            }

            // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - —É–º–Ω—ã–π –æ—Ç–≤–µ—Ç
            const responses = [
                `üîç –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π—Ç–µ –ø–æ–∏—â–µ–º —á—Ç–æ-—Ç–æ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ.\n\nüí° –í—ã –º–æ–∂–µ—Ç–µ:\n‚Ä¢ –†–∞—Å—Å–∫–∞–∑–∞—Ç—å –±–æ–ª—å—à–µ –æ —Å–≤–æ–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö\n‚Ä¢ –°–ø—Ä–æ—Å–∏—Ç—å –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—É–±–∞—Ö\n‚Ä¢ –£–∑–Ω–∞—Ç—å –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö\n‚Ä¢ –ü–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç—ã –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å–æ–æ–±—â–µ—Å—Ç–≤–∞`,
                `‚ú® –û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î—É–º–∞—é, –≤–∞–º –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ:\n\nüè† <b>–î–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª—É–±–æ–≤:</b> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º\nüéâ <b>–î–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π:</b> –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–§–µ—Å—Ç–∏–≤–∞–ª–∏"\nüí¨ <b>–î–ª—è –æ–±—â–µ–Ω–∏—è:</b> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–º –≤–∞—Å —Å–æ–æ–±—â–µ—Å—Ç–≤–∞–º\n\n–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?`,
                `üåü –ü–æ–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å! –î–∞–≤–∞–π—Ç–µ –ø–æ–¥—É–º–∞–µ–º –≤–º–µ—Å—Ç–µ:\n\nüéØ <b>–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å:</b>\n1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–∞—à–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã\n2. –ü–æ–∏—â–∏—Ç–µ –ø–æ—Ö–æ–∂–∏–µ –∫–ª—É–±—ã\n3. –ü—Ä–∏–º–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö\n4. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ\n\n–•–æ—á–µ—Ç—Å—è —á—Ç–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ?`
            ];

            return responses[Math.floor(Math.random() * responses.length)];
        }

        function setProcessingState(processing) {
            isProcessing = processing;
            if (processing) {
                sendBtn.innerHTML = '‚è≥';
                sendBtn.disabled = true;
                input.disabled = true;
                sendBtn.style.opacity = '0.6';
                sendBtn.style.cursor = 'not-allowed';
            } else {
                sendBtn.innerHTML = 'üì§';
                sendBtn.disabled = false;
                input.disabled = false;
                sendBtn.style.opacity = '1';
                sendBtn.style.cursor = 'pointer';
            }
            input.addEventListener('input', function() {
                sendBtn.disabled = !input.value.trim() || isProcessing;
                sendBtn.style.opacity = input.value.trim() && !isProcessing ? '1' : '0.6';
                sendBtn.style.cursor = input.value.trim() && !isProcessing ? 'pointer' : 'not-allowed';
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
        function loadMessageHistory() {
            const savedHistory = localStorage.getItem('widgetHistory_' + sessionId);
            if (savedHistory) {
                try {
                    messageHistory = JSON.stringify(savedHistory);
                    console.log('‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
                } catch (e) {
                    console.log('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é');
                }
            }
        }

        // –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–Ω–æ–ø–∫–∏
        button.addEventListener('mouseenter', function() {
            const particles = 5;
            for (let i = 0; i < particles; i++) {
                createParticle(button);
            }
        });

        function createParticle(element) {
            const particle = document.createElement('div');
            particle.style.cssText = `
                position: fixed;
                width: 4px;
                height: 4px;
                background: rgba(102, 126, 234, 0.6);
                border-radius: 50%;
                pointer-events: none;
                z-index: 9997;
                animation: particleFloat 2s ease-out forwards;
            `;
            document.body.appendChild(particle);

            const rect = element.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;

            particle.style.left = x + 'px';
            particle.style.top = y + 'px';

            const angle = Math.random() * Math.PI * 2;
            const velocity = 50 + Math.random() * 50;
            const vx = Math.cos(angle) * velocity;
            const vy = Math.sin(angle) * velocity;

            particle.animate([
                { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                { transform: `translate(${vx}px, ${vy}px) scale(0)`, opacity: 0 }
            ], {
                duration: 2000,
                easing: 'ease-out'
            });

            setTimeout(() => particle.remove(), 2000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        loadMessageHistory();
        console.log('üöÄ –ú–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ!');
        console.log('   ‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏');
        console.log('   ‚Ä¢ –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞');
        console.log('   ‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç—ã —á–∞—Å—Ç–∏—Ü –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏');
        console.log('   ‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π');
        console.log('   ‚Ä¢ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∏–º–∏—Ç–∞—Ü–∏—è –ø–µ—á–∞—Ç–∏');
        console.log('   Session ID:', sessionId);
    </script>

</html>
