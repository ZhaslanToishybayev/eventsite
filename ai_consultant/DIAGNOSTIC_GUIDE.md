# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: Tool Calls

## –î–∞—Ç–∞: 2025-11-20 09:17

---

## ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û:

1. **–í –ë–î –µ—Å—Ç—å –∫–ª—É–±—ã:** 6 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª—É–±–æ–≤ ‚úÖ
2. **AI –Ω–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É–µ—Ç:** –ì–æ–≤–æ—Ä–∏—Ç "–î–∞–≤–∞–π –Ω–∞–π–¥–µ–º" ‚úÖ
3. **AI –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å tool:** "–ü—Ä–æ–≤–µ–¥—É –ø–æ–∏—Å–∫" ‚úÖ

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê:

AI –≥–æ–≤–æ—Ä–∏—Ç "–ü–æ–¥–æ–∂–¥–∏ –Ω–µ–º–Ω–æ–≥–æ" –Ω–æ **–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**.

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **Tool –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è**
2. **Second response –æ—Ç OpenAI –ø—É—Å—Ç–æ–π**
3. **–û—à–∏–±–∫–∞ –≤ tool_executor**

---

## üîß –ß–¢–û –°–î–ï–õ–ê–ù–û:

### –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ chat.py:

```python
logger.info(f"üîß Executing tool: {func_name} with args: {func_args}")
tool_result = self.tool_executor.execute(...)
logger.info(f"‚úÖ Tool result: {tool_result[:200]}...")

logger.info(f"üîÑ Calling OpenAI again with {len(messages_context)} messages")
second_response = self.openai_service.chat_completion(...)
logger.info(f"‚úÖ Second response: {second_response.get('content', '')[:200]}...")
```

---

## üß™ –ö–ê–ö –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨:

### –®–∞–≥ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Django —Å–µ—Ä–≤–µ—Ä

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ:
cd /home/zhaslan/Downloads/unitysphere-project/home/almalinux/new/unitysphere
source venv/bin/activate
python manage.py runserver 0.0.0.0:8000
```

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏ –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

```bash
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
cd /home/zhaslan/Downloads/unitysphere-project/home/almalinux/new/unitysphere
tail -f logs/django.log | grep -E "üîß|‚úÖ|üîÑ|ERROR"
```

–ï—Å–ª–∏ –Ω–µ—Ç —Ñ–∞–π–ª–∞ –ª–æ–≥–æ–≤:
```bash
# –°–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é
# –õ–æ–≥–∏ –±—É–¥—É—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω runserver
```

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+Shift+R)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –°–ø—Ä–æ—Å–∏—Ç–µ: "–ù–∞–π–¥–∏ —Ç–∞–Ω—Ü–µ–≤–∞–ª—å–Ω—ã–µ –∫–ª—É–±—ã"
4. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
```

### –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ª–æ–≥–∞—Ö:**

```
üîß Executing tool: search_clubs with args: {'query': '—Ç–∞–Ω—Ü—ã', 'limit': 5}
‚úÖ Tool result: –ù–∞—à–µ–ª –∫–ª—É–±—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É "—Ç–∞–Ω—Ü—ã":...
üîÑ Calling OpenAI again with 4 messages
‚úÖ Second response: –í–æ—Ç —á—Ç–æ —è –Ω–∞—à–µ–ª –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:...
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
- ‚úÖ –í—Å–µ 4 —Å—Ç—Ä–æ–∫–∏ ‚Üí Tool —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –¥—Ä—É–≥–æ–º
- ‚ùå –ù–µ—Ç "üîß Executing" ‚Üí Tool –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- ‚ùå –ù–µ—Ç "‚úÖ Second response" ‚Üí OpenAI –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- ‚ùå ERROR ‚Üí –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ù–∞–π–¥–∏ —Ç–∞–Ω—Ü–µ–≤–∞–ª—å–Ω—ã–µ –∫–ª—É–±—ã"

AI: "–î–∞–≤–∞–π –Ω–∞–π–¥–µ–º –∫–ª—É–±—ã –ø–æ —Ç–∞–Ω—Ü–∞–º! ü©∞

–í–æ—Ç —á—Ç–æ —è –Ω–∞—à–µ–ª –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

üè† **1. [–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª—É–±–∞]**
üìù [–û–ø–∏—Å–∞–Ω–∏–µ]
üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –•–æ–±–±–∏
üë• –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: [—á–∏—Å–ª–æ]

üí° **–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –∫–ª—É–±–µ?**"
```

---

## üí° –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

### –í–∞—Ä–∏–∞–Ω—Ç 1: Tool –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** OpenAI –Ω–µ –≤–∏–¥–∏—Ç tools –∏–ª–∏ –Ω–µ —Ö–æ—á–µ—Ç –∏—Ö –≤—ã–∑—ã–≤–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ tools –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ OpenAI
# –í chat.py —Å—Ç—Ä–æ–∫–∞ ~115:
tools=tools if tools else None,
tool_choice="auto" if tools else None
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Tool –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—É—Å—Ç–æ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** `format_club_recommendations` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ shell:
from ai_consultant.services_v2 import AIConsultantServiceV2
service = AIConsultantServiceV2()
result = service.get_clubs_by_interest_keywords("—Ç–∞–Ω—Ü—ã", 5)
print(result)
formatted = service.format_club_recommendations(result)
print(formatted)
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Second response –ø—É—Å—Ç–æ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** OpenAI –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ—Å–ª–µ tool call

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á OpenAI
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç messages_context

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò:

- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å–µ—Ä–≤–µ—Ä
- [ ] –û—Ç–∫—Ä—ã–ª–∏ –ª–æ–≥–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ –∑–∞–ø—Ä–æ—Å
- [ ] –£–≤–∏–¥–µ–ª–∏ "üîß Executing tool"
- [ ] –£–≤–∏–¥–µ–ª–∏ "‚úÖ Tool result"
- [ ] –£–≤–∏–¥–µ–ª–∏ "üîÑ Calling OpenAI"
- [ ] –£–≤–∏–¥–µ–ª–∏ "‚úÖ Second response"
- [ ] AI –ø–æ–∫–∞–∑–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏**
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ**
4. **–ü—Ä–∏—à–ª–∏—Ç–µ –ª–æ–≥–∏** –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## ‚úÖ –°–¢–ê–¢–£–°:

**–ö–æ–¥:** ‚úÖ –ì–æ—Ç–æ–≤  
**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚è≥ –û–∂–∏–¥–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ!** üöÄ

---

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞:**

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –°–µ—Ä–≤–µ—Ä
cd /home/zhaslan/Downloads/unitysphere-project/home/almalinux/new/unitysphere
source venv/bin/activate
python manage.py runserver 0.0.0.0:8000

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –õ–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
cd /home/zhaslan/Downloads/unitysphere-project/home/almalinux/new/unitysphere
tail -f logs/django.log | grep -E "üîß|‚úÖ|üîÑ"

# –ë—Ä–∞—É–∑–µ—Ä:
Ctrl+Shift+R ‚Üí "–ù–∞–π–¥–∏ —Ç–∞–Ω—Ü–µ–≤–∞–ª—å–Ω—ã–µ –∫–ª—É–±—ã"
```
